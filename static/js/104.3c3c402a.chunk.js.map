{"version":3,"file":"static/js/104.3c3c402a.chunk.js","mappings":"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","sources":["pages/ProductDetails/ProductDetails.jsx","../node_modules/@mui/icons-material/ArrowBackIosNewRounded.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useParams, useLocation } from 'react-router-dom';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from 'firebase-config/config';\nimport { addProduct, deleteProduct } from 'redux/cart/slice';\nimport { setErrorStatus, setIsLoading } from 'redux/global/slice';\nimport { selectIsLoggedIn } from 'redux/auth/selectors';\nimport { selectCartItems } from 'redux/cart/selectors';\nimport {\n  Box,\n  Container,\n  Stack,\n  Button,\n  Typography,\n  Rating,\n} from '@mui/material';\nimport AddShoppingCartRoundedIcon from '@mui/icons-material/AddShoppingCartRounded';\nimport ArrowBackIosNewRoundedIcon from '@mui/icons-material/ArrowBackIosNewRounded';\nimport RemoveShoppingCartRoundedIcon from '@mui/icons-material/RemoveShoppingCartRounded';\nimport { SigninModal } from 'components';\n\nexport default function ProductDetails() {\n  const [product, setProduct] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n\n  const cartItems = useSelector(selectCartItems);\n  const isLoggedIn = useSelector(selectIsLoggedIn);\n\n  const dispatch = useDispatch();\n\n  const location = useLocation();\n  const backLinkHref = location.state?.from ?? '/products';\n\n  const { productId } = useParams();\n  const docRef = doc(db, 'products', productId);\n\n  useEffect(() => {\n    dispatch(setIsLoading(true));\n    getDoc(docRef)\n      .then(product => setProduct({ id: productId, ...product.data() }))\n      .catch(err => dispatch(setErrorStatus(err.message)))\n      .finally(() => dispatch(setIsLoading(false)));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const addToCart = () => {\n    if (!isLoggedIn) {\n      setIsModalOpen(true);\n      return;\n    }\n\n    dispatch(addProduct(product));\n  };\n\n  if (!product) return null;\n\n  const {\n    name,\n    weight,\n    diameter,\n    price,\n    discountPrice,\n    ingredients,\n    description,\n    photoUrl,\n    rating,\n  } = product;\n\n  const isInCart = cartItems.some(product => product.id === productId);\n  const pricePerUnit = discountPrice || price;\n\n  return (\n    <Container>\n      <Stack\n        spacing={4}\n        direction={{ xs: 'column', sm: 'row' }}\n        alignItems=\"flex-start\"\n      >\n        <Box borderRadius={10} overflow=\"hidden\" boxShadow={2} maxWidth=\"600px\">\n          <img src={photoUrl} alt={name} width=\"600\" />\n        </Box>\n        <Stack>\n          <Typography variant=\"h4\" mb={2} color=\"primary\">\n            {name}\n          </Typography>\n          <Typography mb={2}>{description}</Typography>\n          <Rating name=\"read-only\" value={rating} precision={0.5} readOnly />\n          <Typography mb={2} mt={2}>\n            <Typography variant=\"h6\" component=\"span\" mr={1}>\n              Ingredients:\n            </Typography>\n            {ingredients.join(', ')}\n          </Typography>\n          <Typography mb={2}>\n            <Typography variant=\"h6\" component=\"span\" mr={1}>\n              Weight:\n            </Typography>\n            {weight} g\n          </Typography>\n          <Typography mb={2}>\n            <Typography variant=\"h6\" component=\"span\" mr={1}>\n              Diameter:\n            </Typography>\n            {diameter} cm\n          </Typography>\n          <Stack direction=\"row\" spacing={2}>\n            <Typography variant=\"h4\" color=\"primary\" mb={2}>\n              {pricePerUnit}₴\n            </Typography>\n            {discountPrice && (\n              <Typography\n                variant=\"h6\"\n                sx={{ textDecoration: 'line-through' }}\n                mb={2}\n              >\n                {price}₴\n              </Typography>\n            )}\n          </Stack>\n          <Stack spacing={2}>\n            {isInCart ? (\n              <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                startIcon={<RemoveShoppingCartRoundedIcon />}\n                onClick={() => dispatch(deleteProduct(productId))}\n              >\n                Delete from cart\n              </Button>\n            ) : (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                startIcon={<AddShoppingCartRoundedIcon />}\n                onClick={addToCart}\n              >\n                Add to cart\n              </Button>\n            )}\n            <Button\n              component={Link}\n              to={backLinkHref}\n              variant=\"outlined\"\n              color=\"primary\"\n              startIcon={<ArrowBackIosNewRoundedIcon />}\n            >\n              Go back\n            </Button>\n          </Stack>\n        </Stack>\n      </Stack>\n      <SigninModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />\n    </Container>\n  );\n}\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16.88 2.88c-.49-.49-1.28-.49-1.77 0L6.7 11.29c-.39.39-.39 1.02 0 1.41l8.41 8.41c.49.49 1.28.49 1.77 0s.49-1.28 0-1.77L9.54 12l7.35-7.35c.48-.49.48-1.28-.01-1.77z\"\n}), 'ArrowBackIosNewRounded');\nexports.default = _default;"],"names":["ProductDetails","useState","product","setProduct","isModalOpen","setIsModalOpen","cartItems","useSelector","selectCartItems","isLoggedIn","selectIsLoggedIn","dispatch","useDispatch","backLinkHref","useLocation","state","from","productId","useParams","docRef","doc","db","useEffect","setIsLoading","getDoc","then","id","data","catch","err","setErrorStatus","message","finally","name","weight","diameter","price","discountPrice","ingredients","description","photoUrl","rating","isInCart","some","pricePerUnit","spacing","direction","xs","sm","alignItems","borderRadius","overflow","boxShadow","maxWidth","src","alt","width","variant","mb","color","value","precision","readOnly","mt","component","mr","join","sx","textDecoration","startIcon","onClick","deleteProduct","addProduct","Link","to","isOpen","onClose","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}